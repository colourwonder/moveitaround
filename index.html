<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Plants Vs. Zombies - Flower Power</title>
        <script src="//cdn.jsdelivr.net/phaser/2.5.0/phaser.min.js"></script>
    </head>
    <body>

    <script type="text/javascript">
var game = new Phaser.Game(800, 600, Phaser.CANVAS, 'phaser-example', { preload: preload, create: create, update: update, render: render });

function preload() {

    game.load.spritesheet('zombie', 'img/hippie zombie75x168.png', 75, 168, 18);

}

var sprites;
var rip = 0;

function create() {

    sprites = game.add.group();

    game.time.events.loop(50, createSprite, this);

}

function createSprite() {

    var zombie = sprites.create(0, game.world.randomY, 'zombie');

    zombie.animations.add('walk');

    zombie.play('walk', 2, true);

}

function update() {

    sprites.setAll('x', 2, true, true, 1);

    sprites.forEach(checkSprite, this, true);

}

function checkSprite(sprite) {

    try {
        if (sprite.x > game.width)
        {
            rip++;
            sprites.remove(sprite, true);
        }
    }
    catch (e)
    {
        console.log(sprite);
    }

}

function render() {

    game.debug.text("Group size: " + sprites.total, 32, 32);
    game.debug.text("Destroyed: " + rip, 32, 64);

}

    </script>

    </body>
</html>